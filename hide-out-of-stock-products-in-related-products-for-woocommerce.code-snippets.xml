<?xml version="1.0" encoding="UTF-8"?>
<!-- This is a code snippets export file generated by the Code Snippets WordPress plugin. -->
<!-- https://wordpress.org/plugins/code-snippets -->
<!-- To import these snippets a WordPress site follow these steps: -->
<!-- 1. Log in to that site as an administrator. -->
<!-- 2. Install the Code Snippets plugin using the directions provided at the above link. -->
<!-- 3. Go to 'Tools: Import' in the WordPress admin panel. -->
<!-- 4. Click on the "Code Snippets" importer in the list -->
<!-- 5. Upload this file using the form provided on that page. -->
<!-- 6. Code Snippets will then import all of the snippets and associated information contained in this file into your site. -->
<!-- 7. You will then have to visit the 'Snippets: All Snippets' admin menu and activate desired snippets. -->
<!-- generator="Code Snippets/2.9.0" created="2017-09-07 14:16" -->
<snippets>
  <snippet scope="2">
    <name>Hide out of stock products in related products for WooCommerce</name>
    <desc></desc>
    <tags>hide, out, of, stock, related, products, woocommerce</tags>
    <code>function woocommerce_enable_hide_out_of_stock_items( $template_name, $template_path, $located, $args ) {&#13;
    if( $template_name !== "single-product/related.php" ) {&#13;
        return;&#13;
    }&#13;
 &#13;
    add_filter( 'pre_option_woocommerce_hide_out_of_stock_items', function( $option ) { return "yes"; }, 10, 1 );&#13;
}&#13;
 &#13;
/**&#13;
 * Temporarily disable hide out of stock items.&#13;
 *&#13;
 * @param string $template_name&#13;
 * @param string $template_path&#13;
 * @param bool $located&#13;
 * @param array $args&#13;
 */&#13;
function woocommerce_disable_hide_out_of_stock_items( $template_name, $template_path, $located, $args ) {&#13;
    if( $template_name !== "single-product/related.php" ) {&#13;
        return;&#13;
    }&#13;
 &#13;
    add_filter( 'pre_option_woocommerce_hide_out_of_stock_items', function( $option ) { return "no"; }, 10, 1 );&#13;
}&#13;
 &#13;
add_action( 'woocommerce_before_template_part', 'woocommerce_enable_hide_out_of_stock_items', 10, 4 );&#13;
add_action( 'woocommerce_after_template_part', 'woocommerce_disable_hide_out_of_stock_items', 10, 4 );</code>
  </snippet>
</snippets>
